<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>DGtalTools: volMask.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js", "TeX/AMSmath.js", "TeX/AMSsymbols.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.3/MathJax.js?config=TeX-MML-AM_CHTML/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesomeDGtalTools.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">DGtalTools<span id="projectnumber">&#160;2.0.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function() { init_codefold(0); });
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('volMask_8cpp_source.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">volMask.cpp</div></div>
</div><!--header-->
<div class="contents">
<div class="fragment"><div class="line"><a id="l00001" name="l00001"></a><span class="lineno">    1</span> </div>
<div class="line"><a id="l00032" name="l00032"></a><span class="lineno">   32</span><span class="preprocessor">#include &quot;DGtal/base/Common.h&quot;</span></div>
<div class="line"><a id="l00033" name="l00033"></a><span class="lineno">   33</span><span class="preprocessor">#include &lt;DGtal/helpers/StdDefs.h&gt;</span></div>
<div class="line"><a id="l00034" name="l00034"></a><span class="lineno">   34</span><span class="preprocessor">#include &lt;DGtal/images/ImageContainerBySTLVector.h&gt;</span></div>
<div class="line"><a id="l00035" name="l00035"></a><span class="lineno">   35</span> </div>
<div class="line"><a id="l00036" name="l00036"></a><span class="lineno">   36</span><span class="preprocessor">#include &lt;DGtal/io/readers/GenericReader.h&gt;</span></div>
<div class="line"><a id="l00037" name="l00037"></a><span class="lineno">   37</span><span class="preprocessor">#include &lt;DGtal/io/writers/GenericWriter.h&gt;</span></div>
<div class="line"><a id="l00038" name="l00038"></a><span class="lineno">   38</span> </div>
<div class="line"><a id="l00039" name="l00039"></a><span class="lineno">   39</span><span class="preprocessor">#include &quot;CLI11.hpp&quot;</span></div>
<div class="line"><a id="l00040" name="l00040"></a><span class="lineno">   40</span> </div>
<div class="line"><a id="l00041" name="l00041"></a><span class="lineno">   41</span><span class="preprocessor">#ifdef DGTAL_WITH_ITK</span></div>
<div class="line"><a id="l00042" name="l00042"></a><span class="lineno">   42</span><span class="preprocessor">#include &quot;DGtal/io/readers/ITKReader.h&quot;</span></div>
<div class="line"><a id="l00043" name="l00043"></a><span class="lineno">   43</span><span class="preprocessor">#include &quot;DGtal/io/writers/ITKWriter.h&quot;</span></div>
<div class="line"><a id="l00044" name="l00044"></a><span class="lineno">   44</span> </div>
<div class="line"><a id="l00045" name="l00045"></a><span class="lineno">   45</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00046" name="l00046"></a><span class="lineno">   46</span> </div>
<div class="line"><a id="l00048" name="l00048"></a><span class="lineno">   48</span><span class="keyword">using namespace </span>std;</div>
<div class="line"><a id="l00049" name="l00049"></a><span class="lineno">   49</span><span class="keyword">using namespace </span><a class="code hl_namespace" href="namespaceDGtal.html">DGtal</a>;</div>
<div class="line"><a id="l00051" name="l00051"></a><span class="lineno">   51</span> </div>
<div class="line"><a id="l00093" name="l00093"></a><span class="lineno">   93</span><span class="keyword">typedef</span> ImageContainerBySTLVector &lt; Z3i::Domain, unsigned char &gt; Image3D;</div>
<div class="line"><a id="l00094" name="l00094"></a><span class="lineno">   94</span><span class="preprocessor">#ifdef DGTAL_WITH_ITK</span></div>
<div class="line"><a id="l00095" name="l00095"></a><span class="lineno">   95</span><span class="keyword">typedef</span> ImageContainerBySTLVector &lt; Z3i::Domain,  double &gt; Image3D_D;</div>
<div class="line"><a id="l00096" name="l00096"></a><span class="lineno">   96</span><span class="keyword">typedef</span> ImageContainerBySTLVector &lt; Z3i::Domain,  int &gt; Image3D_I;</div>
<div class="line"><a id="l00097" name="l00097"></a><span class="lineno">   97</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00098" name="l00098"></a><span class="lineno">   98</span> </div>
<div class="line"><a id="l00103" name="l00103"></a><span class="lineno">  103</span><span class="keyword">template</span>&lt;<span class="keyword">typename</span> TImage, <span class="keyword">typename</span> TImageMask&gt;</div>
<div class="line"><a id="l00104" name="l00104"></a><span class="lineno">  104</span><span class="keyword">typename</span> TImageMask::Domain</div>
<div class="line"><a id="l00105" name="l00105"></a><span class="lineno">  105</span>subDomainMasked(<span class="keyword">const</span> TImage &amp;image, <span class="keyword">const</span>  TImageMask &amp;maskImage,</div>
<div class="line"><a id="l00106" name="l00106"></a><span class="lineno">  106</span>                <span class="keyword">typename</span> TImageMask::Value maskValue, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> domainOffset=1){</div>
<div class="line"><a id="l00107" name="l00107"></a><span class="lineno">  107</span>  <span class="keyword">typename</span> TImageMask::Domain res;</div>
<div class="line"><a id="l00108" name="l00108"></a><span class="lineno">  108</span>  Z3i::Point minP = image.domain().upperBound();</div>
<div class="line"><a id="l00109" name="l00109"></a><span class="lineno">  109</span>  Z3i::Point maxP = image.domain().lowerBound();</div>
<div class="line"><a id="l00110" name="l00110"></a><span class="lineno">  110</span>  </div>
<div class="line"><a id="l00111" name="l00111"></a><span class="lineno">  111</span>  Z3i::Point::Iterator minIt;</div>
<div class="line"><a id="l00112" name="l00112"></a><span class="lineno">  112</span>  Z3i::Point::Iterator maxIt;</div>
<div class="line"><a id="l00113" name="l00113"></a><span class="lineno">  113</span>  <span class="keywordtype">bool</span> foundMaskedVal = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00114" name="l00114"></a><span class="lineno">  114</span>  <span class="keywordflow">for</span>(<span class="keyword">const</span> <span class="keyword">auto</span> &amp;p: image.domain())</div>
<div class="line"><a id="l00115" name="l00115"></a><span class="lineno">  115</span>  {</div>
<div class="line"><a id="l00116" name="l00116"></a><span class="lineno">  116</span>    minIt = minP.begin();</div>
<div class="line"><a id="l00117" name="l00117"></a><span class="lineno">  117</span>    maxIt = maxP.begin();</div>
<div class="line"><a id="l00118" name="l00118"></a><span class="lineno">  118</span>    <span class="keywordflow">if</span>( maskImage.domain().isInside(p) &amp;&amp; maskImage(p) ==  maskValue ) <span class="comment">// no noise on mask image</span></div>
<div class="line"><a id="l00119" name="l00119"></a><span class="lineno">  119</span>    {</div>
<div class="line"><a id="l00120" name="l00120"></a><span class="lineno">  120</span>      foundMaskedVal=<span class="keyword">true</span>;</div>
<div class="line"><a id="l00121" name="l00121"></a><span class="lineno">  121</span>      <span class="keywordflow">for</span>(<span class="keyword">auto</span> pIt=p.begin(); pIt!=p.end();pIt++ )</div>
<div class="line"><a id="l00122" name="l00122"></a><span class="lineno">  122</span>      {</div>
<div class="line"><a id="l00123" name="l00123"></a><span class="lineno">  123</span>        <span class="keywordflow">if</span>( *pIt &lt; *minIt ){*minIt = *pIt;}</div>
<div class="line"><a id="l00124" name="l00124"></a><span class="lineno">  124</span>        <span class="keywordflow">if</span>( *pIt &gt; *maxIt ){*maxIt = *pIt;}</div>
<div class="line"><a id="l00125" name="l00125"></a><span class="lineno">  125</span>        minIt++;</div>
<div class="line"><a id="l00126" name="l00126"></a><span class="lineno">  126</span>        maxIt++;</div>
<div class="line"><a id="l00127" name="l00127"></a><span class="lineno">  127</span>      }</div>
<div class="line"><a id="l00128" name="l00128"></a><span class="lineno">  128</span>    }</div>
<div class="line"><a id="l00129" name="l00129"></a><span class="lineno">  129</span>  }</div>
<div class="line"><a id="l00130" name="l00130"></a><span class="lineno">  130</span>  <span class="keywordflow">if</span> (!foundMaskedVal)</div>
<div class="line"><a id="l00131" name="l00131"></a><span class="lineno">  131</span>  {</div>
<div class="line"><a id="l00132" name="l00132"></a><span class="lineno">  132</span>    trace.info() &lt;&lt; <span class="stringliteral">&quot;No masked value found resulting image will be empty.&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><a id="l00133" name="l00133"></a><span class="lineno">  133</span>    <span class="keywordflow">return</span> image.domain();</div>
<div class="line"><a id="l00134" name="l00134"></a><span class="lineno">  134</span> </div>
<div class="line"><a id="l00135" name="l00135"></a><span class="lineno">  135</span>  }</div>
<div class="line"><a id="l00136" name="l00136"></a><span class="lineno">  136</span>  <span class="comment">// offset to avoid problems on borders</span></div>
<div class="line"><a id="l00137" name="l00137"></a><span class="lineno">  137</span>  Z3i::Point offset(domainOffset,domainOffset,domainOffset);</div>
<div class="line"><a id="l00138" name="l00138"></a><span class="lineno">  138</span>  minP -= offset;</div>
<div class="line"><a id="l00139" name="l00139"></a><span class="lineno">  139</span>  maxP += offset;</div>
<div class="line"><a id="l00140" name="l00140"></a><span class="lineno">  140</span>  trace.info() &lt;&lt; <span class="stringliteral">&quot;sub-domain:&quot;</span> &lt;&lt; minP &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; maxP &lt;&lt; std::endl;</div>
<div class="line"><a id="l00141" name="l00141"></a><span class="lineno">  141</span>  <span class="keywordflow">return</span> <span class="keyword">typename</span> TImageMask::Domain(minP, maxP);</div>
<div class="line"><a id="l00142" name="l00142"></a><span class="lineno">  142</span>}</div>
<div class="line"><a id="l00143" name="l00143"></a><span class="lineno">  143</span> </div>
<div class="line"><a id="l00144" name="l00144"></a><span class="lineno">  144</span> </div>
<div class="line"><a id="l00145" name="l00145"></a><span class="lineno">  145</span><span class="keyword">template</span>&lt;<span class="keyword">typename</span> TImage, <span class="keyword">typename</span> TImageMask&gt;</div>
<div class="line"><a id="l00146" name="l00146"></a><span class="lineno">  146</span><span class="keywordtype">void</span></div>
<div class="line"><a id="l00147" name="l00147"></a><span class="lineno">  147</span>applyMask(<span class="keyword">const</span> TImage &amp;inputImage,TImage &amp;outputImage,</div>
<div class="line"><a id="l00148" name="l00148"></a><span class="lineno">  148</span>          <span class="keyword">const</span> TImageMask &amp;maskImage, <span class="keyword">typename</span> TImageMask::Value maskValue)</div>
<div class="line"><a id="l00149" name="l00149"></a><span class="lineno">  149</span>{</div>
<div class="line"><a id="l00150" name="l00150"></a><span class="lineno">  150</span>  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;p: outputImage.domain())</div>
<div class="line"><a id="l00151" name="l00151"></a><span class="lineno">  151</span>  {</div>
<div class="line"><a id="l00152" name="l00152"></a><span class="lineno">  152</span>    <span class="keywordflow">if</span> (inputImage.domain().isInside(p) &amp;&amp;  maskImage(p) ==  maskValue)</div>
<div class="line"><a id="l00153" name="l00153"></a><span class="lineno">  153</span>    {</div>
<div class="line"><a id="l00154" name="l00154"></a><span class="lineno">  154</span>      outputImage.setValue(p, inputImage(p) );</div>
<div class="line"><a id="l00155" name="l00155"></a><span class="lineno">  155</span>    }</div>
<div class="line"><a id="l00156" name="l00156"></a><span class="lineno">  156</span>  }</div>
<div class="line"><a id="l00157" name="l00157"></a><span class="lineno">  157</span>  </div>
<div class="line"><a id="l00158" name="l00158"></a><span class="lineno">  158</span>}</div>
<div class="line"><a id="l00159" name="l00159"></a><span class="lineno">  159</span> </div>
<div class="line"><a id="l00160" name="l00160"></a><span class="lineno">  160</span><span class="keyword">template</span>&lt;<span class="keyword">typename</span> TImage, <span class="keyword">typename</span> TImageMask&gt;</div>
<div class="line"><a id="l00161" name="l00161"></a><span class="lineno">  161</span><span class="keywordtype">void</span></div>
<div class="line"><a id="l00162" name="l00162"></a><span class="lineno">  162</span>processImage(<span class="keyword">const</span> TImage &amp;inputImage, <span class="keyword">const</span> TImageMask &amp;maskImage,</div>
<div class="line"><a id="l00163" name="l00163"></a><span class="lineno">  163</span>             <span class="keyword">typename</span> TImageMask::Value maskValue, std::string outputFileName, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> offsetBorder ){</div>
<div class="line"><a id="l00164" name="l00164"></a><span class="lineno">  164</span>  <span class="comment">// First step getting the bounding box of the domain:</span></div>
<div class="line"><a id="l00165" name="l00165"></a><span class="lineno">  165</span>  <span class="keyword">auto</span> subDm = subDomainMasked(inputImage, maskImage, maskValue, offsetBorder);</div>
<div class="line"><a id="l00166" name="l00166"></a><span class="lineno">  166</span>  TImage outputImage( subDm );</div>
<div class="line"><a id="l00167" name="l00167"></a><span class="lineno">  167</span>  <span class="comment">// Second step: masking source image</span></div>
<div class="line"><a id="l00168" name="l00168"></a><span class="lineno">  168</span>  applyMask(inputImage, outputImage, maskImage,  maskValue);</div>
<div class="line"><a id="l00169" name="l00169"></a><span class="lineno">  169</span>  trace.info() &lt;&lt; <span class="stringliteral">&quot;writing output image...&quot;</span>;</div>
<div class="line"><a id="l00170" name="l00170"></a><span class="lineno">  170</span>  GenericWriter&lt;TImage&gt;::exportFile(outputFileName, outputImage);</div>
<div class="line"><a id="l00171" name="l00171"></a><span class="lineno">  171</span>}</div>
<div class="line"><a id="l00172" name="l00172"></a><span class="lineno">  172</span> </div>
<div class="line"><a id="l00173" name="l00173"></a><span class="lineno">  173</span> </div>
<div class="line"><a id="l00174" name="l00174"></a><span class="lineno">  174</span><span class="keywordtype">int</span> main( <span class="keywordtype">int</span> argc, <span class="keywordtype">char</span>** argv )</div>
<div class="line"><a id="l00175" name="l00175"></a><span class="lineno">  175</span>{</div>
<div class="line"><a id="l00176" name="l00176"></a><span class="lineno">  176</span> </div>
<div class="line"><a id="l00177" name="l00177"></a><span class="lineno">  177</span>  <span class="comment">// parse command line using CLI ----------------------------------------------</span></div>
<div class="line"><a id="l00178" name="l00178"></a><span class="lineno">  178</span>  CLI::App app;</div>
<div class="line"><a id="l00179" name="l00179"></a><span class="lineno">  179</span>  std::string inputFileName;</div>
<div class="line"><a id="l00180" name="l00180"></a><span class="lineno">  180</span>  std::string outputFileName {<span class="stringliteral">&quot;result.vol&quot;</span>};</div>
<div class="line"><a id="l00181" name="l00181"></a><span class="lineno">  181</span>  std::string inputType;</div>
<div class="line"><a id="l00182" name="l00182"></a><span class="lineno">  182</span>  std::string maskFileName;</div>
<div class="line"><a id="l00183" name="l00183"></a><span class="lineno">  183</span>  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> offsetBorder {0};</div>
<div class="line"><a id="l00184" name="l00184"></a><span class="lineno">  184</span>  <span class="keywordtype">int</span> maskValue {1};</div>
<div class="line"><a id="l00185" name="l00185"></a><span class="lineno">  185</span>  </div>
<div class="line"><a id="l00186" name="l00186"></a><span class="lineno">  186</span>  app.description(<span class="stringliteral">&quot;Outputs a new image from two input images, one representing the data, one representing the selection mask. The size of output image is the size of the bounding box of selected values, plus the chosen border offset. \n Typical use example:\n \t volMask  ${DGtal}/examples/samples/lobster.vol lobsMasked.vol -a ${DGtal}/examples/samples/lobster.vol  -m 100  \n&quot;</span>);</div>
<div class="line"><a id="l00187" name="l00187"></a><span class="lineno">  187</span>  </div>
<div class="line"><a id="l00188" name="l00188"></a><span class="lineno">  188</span><span class="preprocessor">#ifdef DGTAL_WITH_ITK</span></div>
<div class="line"><a id="l00189" name="l00189"></a><span class="lineno">  189</span>  app.add_option(<span class="stringliteral">&quot;-i,--input,1&quot;</span>, inputFileName, <span class="stringliteral">&quot;an input 3D image vol (or ITK: .nii, mha, ... ) file.&quot;</span> )</div>
<div class="line"><a id="l00190" name="l00190"></a><span class="lineno">  190</span>      -&gt;required()</div>
<div class="line"><a id="l00191" name="l00191"></a><span class="lineno">  191</span>      -&gt;check(CLI::ExistingFile);</div>
<div class="line"><a id="l00192" name="l00192"></a><span class="lineno">  192</span>  app.add_option(<span class="stringliteral">&quot;--inputType,-t&quot;</span>,inputType, <span class="stringliteral">&quot;to specify the input image type (int or double).&quot;</span>);</div>
<div class="line"><a id="l00193" name="l00193"></a><span class="lineno">  193</span> </div>
<div class="line"><a id="l00194" name="l00194"></a><span class="lineno">  194</span><span class="preprocessor">  #else</span></div>
<div class="line"><a id="l00195" name="l00195"></a><span class="lineno">  195</span>  app.add_option(<span class="stringliteral">&quot;-i,--input,1&quot;</span>, inputFileName, <span class="stringliteral">&quot;an input vol file.&quot;</span> )</div>
<div class="line"><a id="l00196" name="l00196"></a><span class="lineno">  196</span>      -&gt;required()</div>
<div class="line"><a id="l00197" name="l00197"></a><span class="lineno">  197</span>      -&gt;check(CLI::ExistingFile);</div>
<div class="line"><a id="l00198" name="l00198"></a><span class="lineno">  198</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00199" name="l00199"></a><span class="lineno">  199</span>  </div>
<div class="line"><a id="l00200" name="l00200"></a><span class="lineno">  200</span>  app.add_option(<span class="stringliteral">&quot;--mask,-a&quot;</span>,maskFileName, <span class="stringliteral">&quot;the mask image that represents the elements that are copied as output in the resulting image (by default set to 1 you can change this value by using --maskValue). &quot;</span>)</div>
<div class="line"><a id="l00201" name="l00201"></a><span class="lineno">  201</span>  -&gt;check(CLI::ExistingFile);</div>
<div class="line"><a id="l00202" name="l00202"></a><span class="lineno">  202</span>  app.add_option(<span class="stringliteral">&quot;-o,--output,2&quot;</span>, outputFileName, <span class="stringliteral">&quot;the output masked image.&quot;</span> );</div>
<div class="line"><a id="l00203" name="l00203"></a><span class="lineno">  203</span>  app.add_option(<span class="stringliteral">&quot;--offsetBorder,-f&quot;</span>, offsetBorder, <span class="stringliteral">&quot;add a border offset to the bounding box of the masked value domain.&quot;</span>);</div>
<div class="line"><a id="l00204" name="l00204"></a><span class="lineno">  204</span>  app.add_option(<span class="stringliteral">&quot;--maskValue,-m&quot;</span>, maskValue, <span class="stringliteral">&quot;the masking value.&quot;</span>);</div>
<div class="line"><a id="l00205" name="l00205"></a><span class="lineno">  205</span>  app.get_formatter()-&gt;column_width(40);</div>
<div class="line"><a id="l00206" name="l00206"></a><span class="lineno">  206</span>  CLI11_PARSE(app, argc, argv);</div>
<div class="line"><a id="l00207" name="l00207"></a><span class="lineno">  207</span>  <span class="comment">// END parse command line using CLI ----------------------------------------------</span></div>
<div class="line"><a id="l00208" name="l00208"></a><span class="lineno">  208</span> </div>
<div class="line"><a id="l00209" name="l00209"></a><span class="lineno">  209</span>  </div>
<div class="line"><a id="l00210" name="l00210"></a><span class="lineno">  210</span>  </div>
<div class="line"><a id="l00211" name="l00211"></a><span class="lineno">  211</span>  trace.info() &lt;&lt; <span class="stringliteral">&quot;Reading mask image...&quot;</span>;</div>
<div class="line"><a id="l00212" name="l00212"></a><span class="lineno">  212</span>  Image3D maskImage = DGtal::GenericReader&lt;Image3D&gt;::import(maskFileName);</div>
<div class="line"><a id="l00213" name="l00213"></a><span class="lineno">  213</span>  trace.info() &lt;&lt; <span class="stringliteral">&quot;[done]&quot;</span>&lt;&lt; std::endl;</div>
<div class="line"><a id="l00214" name="l00214"></a><span class="lineno">  214</span>  trace.info() &lt;&lt; <span class="stringliteral">&quot;Reading input image...&quot;</span>;</div>
<div class="line"><a id="l00215" name="l00215"></a><span class="lineno">  215</span><span class="preprocessor">#ifdef DGTAL_WITH_ITK</span></div>
<div class="line"><a id="l00216" name="l00216"></a><span class="lineno">  216</span>  <span class="keywordflow">if</span> (inputType==<span class="stringliteral">&quot;double&quot;</span>)</div>
<div class="line"><a id="l00217" name="l00217"></a><span class="lineno">  217</span>  {</div>
<div class="line"><a id="l00218" name="l00218"></a><span class="lineno">  218</span>    Image3D_D inputImage = DGtal::GenericReader&lt;Image3D_D&gt;::import(inputFileName);</div>
<div class="line"><a id="l00219" name="l00219"></a><span class="lineno">  219</span>    trace.info() &lt;&lt; <span class="stringliteral">&quot;[done]&quot;</span>&lt;&lt; std::endl;</div>
<div class="line"><a id="l00220" name="l00220"></a><span class="lineno">  220</span>    processImage(inputImage, maskImage, maskValue, outputFileName, offsetBorder);</div>
<div class="line"><a id="l00221" name="l00221"></a><span class="lineno">  221</span>  }</div>
<div class="line"><a id="l00222" name="l00222"></a><span class="lineno">  222</span>  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (inputType==<span class="stringliteral">&quot;int&quot;</span>)</div>
<div class="line"><a id="l00223" name="l00223"></a><span class="lineno">  223</span>  {</div>
<div class="line"><a id="l00224" name="l00224"></a><span class="lineno">  224</span>    Image3D_I inputImage = DGtal::GenericReader&lt;Image3D_I&gt;::import(inputFileName);</div>
<div class="line"><a id="l00225" name="l00225"></a><span class="lineno">  225</span>    trace.info() &lt;&lt; <span class="stringliteral">&quot;[done]&quot;</span>&lt;&lt; std::endl;</div>
<div class="line"><a id="l00226" name="l00226"></a><span class="lineno">  226</span>    processImage(inputImage, maskImage, maskValue, outputFileName, offsetBorder);</div>
<div class="line"><a id="l00227" name="l00227"></a><span class="lineno">  227</span>  }</div>
<div class="line"><a id="l00228" name="l00228"></a><span class="lineno">  228</span>  <span class="keywordflow">else</span></div>
<div class="line"><a id="l00229" name="l00229"></a><span class="lineno">  229</span>  {</div>
<div class="line"><a id="l00230" name="l00230"></a><span class="lineno">  230</span>    Image3D inputImage = DGtal::GenericReader&lt;Image3D&gt;::import(inputFileName);</div>
<div class="line"><a id="l00231" name="l00231"></a><span class="lineno">  231</span>    trace.info() &lt;&lt; <span class="stringliteral">&quot;[done]&quot;</span>&lt;&lt; std::endl;</div>
<div class="line"><a id="l00232" name="l00232"></a><span class="lineno">  232</span>    processImage(inputImage, maskImage, maskValue, outputFileName, offsetBorder);</div>
<div class="line"><a id="l00233" name="l00233"></a><span class="lineno">  233</span>  }</div>
<div class="line"><a id="l00234" name="l00234"></a><span class="lineno">  234</span><span class="preprocessor">#else</span></div>
<div class="line"><a id="l00235" name="l00235"></a><span class="lineno">  235</span>  Image3D inputImage = DGtal::GenericReader&lt;Image3D&gt;::import(inputFileName);</div>
<div class="line"><a id="l00236" name="l00236"></a><span class="lineno">  236</span>  processImage(inputImage, maskImage, maskValue, outputFileName, offsetBorder);</div>
<div class="line"><a id="l00237" name="l00237"></a><span class="lineno">  237</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00238" name="l00238"></a><span class="lineno">  238</span>  </div>
<div class="line"><a id="l00239" name="l00239"></a><span class="lineno">  239</span>  trace.info() &lt;&lt; <span class="stringliteral">&quot;[Done]&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><a id="l00240" name="l00240"></a><span class="lineno">  240</span>  <span class="keywordflow">return</span> 0;</div>
<div class="line"><a id="l00241" name="l00241"></a><span class="lineno">  241</span>}</div>
<div class="line"><a id="l00242" name="l00242"></a><span class="lineno">  242</span> </div>
<div class="ttc" id="anamespaceDGtal_html"><div class="ttname"><a href="namespaceDGtal.html">DGtal</a></div><div class="ttdef"><b>Definition</b> <a href="ATu0v1_8h_source.html#l00056">ATu0v1.h:57</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_b145db2560fed4586389316a9c647f44.html">volumetric</a></li><li class="navelem"><b>volMask.cpp</b></li>
    <li class="footer">Generated on Fri Jul 25 2025 23:53:41 for DGtalTools by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
